(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{142:function(e,a,t){e.exports=t.p+"static/media/login.24e18e7d.jpg"},143:function(e,a,t){e.exports=t.p+"static/media/register.624ce12d.jpg"},144:function(e,a,t){e.exports=t.p+"static/media/activation.527a4225.jpg"},146:function(e,a,t){e.exports=t(285)},174:function(e,a){},176:function(e,a){},190:function(e,a){},192:function(e,a){},220:function(e,a){},222:function(e,a){},223:function(e,a){},229:function(e,a){},231:function(e,a){},249:function(e,a){},251:function(e,a){},263:function(e,a){},266:function(e,a){},283:function(e,a,t){},285:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(24),c=t.n(l),o=t(7),s=t(3),m=t(19),i=t(48),u=t.n(i),g=function(){var e=u.a.get("token"),a=localStorage.getItem("user");return!(!e||!a)&&JSON.parse(a)},f=t(4),p=t(18),b=t.n(p);function d(e){var a=e.match,t=Object(n.useState)({username:"",email:""}),l=Object(m.a)(t,2),c=l[0],s=l[1];Object(n.useEffect)((function(){var e=localStorage.user;localStorage.length&&b.a.get("/users/".concat(e.replace(/['"]+/g,""))).then((function(e){s({id:e.data._id,username:e.data.username,email:e.data.email})})).catch((function(e){return f.b.error(e.response.data.error)}))}),[a.params]);var i=c.username,u=c.id;return r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"background-white"},g()?r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"You are currently logged in, ",i),r.a.createElement(o.b,{to:"/user/".concat(u)},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.4rem"}}),"Profile"))):r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"Login or Register to access our content!"),r.a.createElement(o.b,{to:"/login"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.4rem"}}),"Login")),r.a.createElement(o.b,{to:"/register"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user-plus",style:{marginRight:"0.4rem"}}),"Register")))))}var E=t(31),h=t(10),v=t(142),N=t.n(v);function k(e){var a=e.history,t=Object(n.useState)({email:"",password:""}),l=Object(m.a)(t,2),c=l[0],i=l[1],p=function(e){return function(a){return i(Object(h.a)(Object(h.a)({},c),{},Object(E.a)({},e,a.target.value)))}},d=c.email,v=c.password;return r.a.createElement("div",{className:"background"},g()?r.a.createElement(s.a,{to:"/"}):null,r.a.createElement(f.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),d&&v?b.a.post("/users/login",{email:d,password:v}).then((function(e){!function(e,a){u.a.set("token",e.data.token,{expires:1}),localStorage.setItem("user",JSON.stringify(e.data.user.id)),a()}(e,(function(){i(Object(h.a)(Object(h.a)({},c),{},{email:"",password:""}))})),g()&&a.push("/user/".concat(e.data.user.id))})).catch((function(e){return f.b.error(e.response.data.error)})):f.b.error("Please fill all fields")}},r.a.createElement("input",{type:"email",value:d,onChange:p("email"),placeholder:"Email",autoComplete:"nope"}),r.a.createElement("input",{type:"password",value:v,onChange:p("password"),placeholder:"Password"}),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("span",{className:"separator"},r.a.createElement("p",{style:{margin:"2.5rem 0"}},"or")),r.a.createElement(o.b,{to:"/register",className:"login-btn",style:{fontWeight:"bold"}},r.a.createElement("i",{className:"fa fa-user-plus",style:{marginRight:"0.5rem"}}),"Create an account"),r.a.createElement(o.b,{to:"/google",className:"login-btn google"},r.a.createElement("i",{className:"fa fa-google",style:{marginRight:"0.5rem"}}),"Google"),r.a.createElement(o.b,{to:"/facebook",className:"login-btn facebook"},r.a.createElement("i",{className:"fa fa-facebook",style:{marginRight:"0.5rem"}}),"Facebook")),r.a.createElement("img",{src:N.a,alt:"register"})))}var y=t(143),j=t.n(y);function O(){var e=Object(n.useState)({username:"",email:"",password:"",passwordConfirm:""}),a=Object(m.a)(e,2),t=a[0],l=a[1],c=t.username,i=t.email,u=t.password,p=t.passwordConfirm,d=function(e){return function(a){return l(Object(h.a)(Object(h.a)({},t),{},Object(E.a)({},e,a.target.value)))}};return r.a.createElement("div",{className:"background"},g()?r.a.createElement(s.a,{to:"/"}):null,r.a.createElement(f.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Create an Account"),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),c&&i&&u?u===p?b.a.post("/users/register",{username:c,email:i,password:u}).then((function(e){l(Object(h.a)(Object(h.a)({},t),{},{username:"",email:"",password:"",passwordConfirm:""})),f.b.success(e.data.message)})).catch((function(e){f.b.error(e.response.data.error)})):f.b.error("Passwords do not match"):f.b.error("Please fill all fields")}},r.a.createElement("input",{type:"text",value:c,onChange:d("username"),placeholder:"Username"}),r.a.createElement("input",{type:"email",value:i,onChange:d("email"),placeholder:"Email",autoComplete:"nope"}),r.a.createElement("input",{type:"password",value:u,onChange:d("password"),placeholder:"Password"}),r.a.createElement("input",{type:"password",value:p,onChange:d("passwordConfirm"),placeholder:"Confirm password"}),r.a.createElement("input",{type:"submit",value:"Register"})),r.a.createElement("span",{className:"separator"},r.a.createElement("p",null,"or")),r.a.createElement(o.b,{to:"/login",className:"login-btn",style:{fontWeight:"bold"}},r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.5rem"}}),"Login"),r.a.createElement(o.b,{to:"/google",className:"login-btn google"},r.a.createElement("i",{className:"fa fa-google",style:{marginRight:"0.5rem"}}),"Google"),r.a.createElement(o.b,{to:"/facebook",className:"login-btn facebook"},r.a.createElement("i",{className:"fa fa-facebook",style:{marginRight:"0.5rem"}}),"Facebook")),r.a.createElement("img",{src:j.a,alt:"register"})))}var w=t(144),S=t.n(w),x=t(145),C=t.n(x);function R(e){var a=e.match,t=Object(n.useState)({username:"",token:""}),l=Object(m.a)(t,2),c=l[0],i=l[1];Object(n.useEffect)((function(){var e=a.params.token;console.log(a);var t=C.a.decode(e).username;e&&i(Object(h.a)(Object(h.a)({},c),{},{username:t,token:e}))}),[a.params]);var u=c.username,p=c.token;return r.a.createElement("div",{className:"background"},g()?r.a.createElement(s.a,{to:"/"}):null,r.a.createElement(f.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Activate your account, ",u),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),b.a.post("/users/activation",{token:p}).then((function(e){i(Object(h.a)({},c)),f.b.success(e.data.message)})).catch((function(e){return f.b.error(e.response.data.error)}))}},r.a.createElement("input",{type:"submit",value:"Activate"})),r.a.createElement("span",{className:"separator"},r.a.createElement("p",{style:{margin:"4rem 0"}},"or")),r.a.createElement(o.b,{to:"/register",className:"login-btn",style:{fontWeight:"bold"}},"Register"),r.a.createElement(o.b,{to:"/login",className:"login-btn",style:{fontWeight:"bold"}},"Login")),r.a.createElement("img",{src:S.a,alt:"register"})))}function L(e){var a=e.match,t=e.history,l=Object(n.useState)({username:"",email:""}),c=Object(m.a)(l,2),s=c[0],i=c[1];Object(n.useEffect)((function(){var e=localStorage.user;localStorage.length&&b.a.get("/users/".concat(e.replace(/['"]+/g,""))).then((function(e){i({username:e.data.username,email:e.data.email}),f.b.success("Welcome!")})).catch((function(e){return f.b.error(e.response.data.error)}))}),[a.params]);var p=s.username,d=s.email;return r.a.createElement("div",{className:"background"},r.a.createElement(f.a,null),r.a.createElement("div",{className:"background-white"},g()?r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"Welcome, ",p),r.a.createElement("h2",null,"You signed in with ",d," email"),r.a.createElement("button",{onClick:function(){var e;e=function(){f.b.success("Signout successful"),t.push("/")},u.a.remove("token",{expires:1}),localStorage.removeItem("user"),e()}},r.a.createElement("i",{className:"fa fa-sign-out",style:{marginRight:"0.4rem"}}),"Signout")):r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"Access denied to unauthorized users"),r.a.createElement(o.b,{to:"/login"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.4rem"}}),"Login")))))}function P(){return r.a.createElement(o.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:d}),r.a.createElement(s.b,{path:"/register",component:O}),r.a.createElement(s.b,{path:"/login",component:k}),r.a.createElement(s.b,{path:"/users/activate/:token",component:R}),r.a.createElement(s.b,{path:"/user/:userId",component:L})))}t(283),t(284);c.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.ac8c6db0.chunk.js.map