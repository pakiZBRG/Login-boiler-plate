(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{142:function(e,a,t){e.exports=t.p+"static/media/login.24e18e7d.jpg"},145:function(e,a,t){e.exports=t.p+"static/media/register.624ce12d.jpg"},146:function(e,a,t){e.exports=t.p+"static/media/activation.527a4225.jpg"},148:function(e,a,t){e.exports=t.p+"static/media/forgotpassword.5b03f3b3.jpg"},149:function(e,a,t){e.exports=t.p+"static/media/resetpassword.e5585993.jpg"},150:function(e,a,t){e.exports=t(289)},178:function(e,a){},180:function(e,a){},194:function(e,a){},196:function(e,a){},224:function(e,a){},226:function(e,a){},227:function(e,a){},233:function(e,a){},235:function(e,a){},253:function(e,a){},255:function(e,a){},267:function(e,a){},270:function(e,a){},287:function(e,a,t){},289:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(25),c=t.n(o),s=t(7),l=t(5),i=t(12),m=t(39),u=t.n(m),g=function(){var e=u.a.get("token"),a=localStorage.getItem("user");return!(!e||!a)&&JSON.parse(a)},d=t(3),p=t(10),f=t.n(p);function b(e){var a=e.match,t=Object(n.useState)({username:"",email:""}),o=Object(i.a)(t,2),c=o[0],l=o[1],m=(new AbortController).signal;Object(n.useEffect)((function(){var e=localStorage.user;localStorage.length&&f.a.get("/users/".concat(e.replace(/['"]+/g,"")),{signal:m}).then((function(e){l({id:e.data._id,username:e.data.username,email:e.data.email})})).catch((function(e){return d.b.error(e.response.data.error)}))}),[a.params]);var u=c.username,p=c.id;return r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"background-white"},g()?r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"You are currently logged in, ",r.a.createElement("span",{style:{color:"crimson"}},u)),r.a.createElement(s.b,{to:"/user/".concat(p)},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.4rem"}}),"Profile"))):r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"Login or Register to access our content!"),r.a.createElement(s.b,{to:"/login"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.4rem"}}),"Login")),r.a.createElement(s.b,{to:"/register"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user-plus",style:{marginRight:"0.4rem"}}),"Register")))))}var E=t(20),h=t(4),v=t(142),k=t.n(v),w=t(143),N=t(144),y=t.n(N);function j(e){var a=e.history,t=Object(n.useState)({email:"",password:""}),o=Object(i.a)(t,2),c=o[0],m=o[1],p=function(e){return function(a){return m(Object(h.a)(Object(h.a)({},c),{},Object(E.a)({},e,a.target.value)))}},b=c.email,v=c.password,N=function(e){return a=e.tokenId,void f.a.post("users/googlelogin",{idToken:a}).then((function(e){return j(e)})).catch((function(){return d.b.error("Google login error")}));var a},j=function(e){!function(e,a){u.a.set("token",e.data.token,{expires:1}),localStorage.setItem("user",JSON.stringify(e.data.user._id)),a()}(e,(function(){g()&&a.push("/user/".concat(e.data.user._id))}))};return r.a.createElement("div",{className:"background"},g()?r.a.createElement(l.a,{to:"/"}):null,r.a.createElement(d.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),b&&v?f.a.post("/users/login",{email:b,password:v}).then((function(e){!function(e,a){u.a.set("token",e.data.token,{expires:1}),localStorage.setItem("user",JSON.stringify(e.data.user.id)),a()}(e,(function(){m(Object(h.a)(Object(h.a)({},c),{},{email:"",password:""}))})),g()&&a.push("/user/".concat(e.data.user.id))})).catch((function(e){return d.b.error(e.response.data.error)})):d.b.error("Please fill all fields")}},r.a.createElement("input",{type:"email",value:b,onChange:p("email"),placeholder:"Email",autoComplete:"nope"}),r.a.createElement("input",{type:"password",value:v,onChange:p("password"),placeholder:"Password"}),r.a.createElement("input",{type:"submit",value:"Login"}),r.a.createElement(s.b,{to:"/forgotpassword",className:"forgot-password"},"Forgot password?")),r.a.createElement("span",{className:"separator"},r.a.createElement("p",{style:{margin:"2.5rem 0"}},"or")),r.a.createElement(s.b,{to:"/register",className:"login-btn",style:{fontWeight:"bold"}},r.a.createElement("i",{className:"fa fa-user-plus",style:{marginRight:"0.5rem"}}),"Create an account"),r.a.createElement(w.GoogleLogin,{clientId:"".concat("198031096750-2qi552ikcgo99lh10oobd6ut59kaimqq.apps.googleusercontent.com"),onSuccess:N,onFailure:N,cookiePolicy:"single_host_origin",render:function(e){return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"login-btn google"},r.a.createElement("i",{className:"fa fa-google",style:{marginRight:"0.5rem"}}),"Google")}}),r.a.createElement(y.a,{appId:"".concat("352084479312057"),autoLoad:!1,callback:function(e){return a=e.userID,t=e.accessToken,void f.a.post("users/facebooklogin",{userID:a,accessToken:t}).then((function(e){return j(e)})).catch((function(){return d.b.error("Facebook login error.")}));var a,t},render:function(e){return r.a.createElement("button",{onClick:e.onClick,className:"login-btn facebook"},r.a.createElement("i",{className:"fa fa-facebook",style:{marginRight:"0.5rem"}}),"Sign in with Facebook")}})),r.a.createElement("img",{src:k.a,alt:"login"})))}var O=t(145),C=t.n(O);function S(){var e=Object(n.useState)({username:"",email:"",password:"",passwordConfirm:""}),a=Object(i.a)(e,2),t=a[0],o=a[1],c=t.username,m=t.email,u=t.password,p=t.passwordConfirm,b=function(e){return function(a){return o(Object(h.a)(Object(h.a)({},t),{},Object(E.a)({},e,a.target.value)))}};return r.a.createElement("div",{className:"background"},g()?r.a.createElement(l.a,{to:"/"}):null,r.a.createElement(d.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Create an Account"),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),c&&m&&u?u===p?f.a.post("/users/register",{username:c,email:m,password:u}).then((function(e){o(Object(h.a)(Object(h.a)({},t),{},{username:"",email:"",password:"",passwordConfirm:""})),d.b.success(e.data.message)})).catch((function(e){d.b.error(e.response.data.error)})):d.b.error("Passwords do not match"):d.b.error("Please fill all fields")}},r.a.createElement("input",{type:"text",value:c,onChange:b("username"),placeholder:"Username"}),r.a.createElement("input",{type:"email",value:m,onChange:b("email"),placeholder:"Email",autoComplete:"nope"}),r.a.createElement("input",{type:"password",value:u,onChange:b("password"),placeholder:"Password"}),r.a.createElement("input",{type:"password",value:p,onChange:b("passwordConfirm"),placeholder:"Confirm password"}),r.a.createElement("input",{type:"submit",value:"Register"})),r.a.createElement("span",{className:"separator"},r.a.createElement("p",null,"or")),r.a.createElement(s.b,{to:"/login",className:"login-btn",style:{fontWeight:"bold"}},r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.5rem"}}),"Login"),r.a.createElement(s.b,{to:"/google",className:"login-btn google"},r.a.createElement("i",{className:"fa fa-google",style:{marginRight:"0.5rem"}}),"Google"),r.a.createElement(s.b,{to:"/facebook",className:"login-btn facebook"},r.a.createElement("i",{className:"fa fa-facebook",style:{marginRight:"0.5rem"}}),"Facebook")),r.a.createElement("img",{src:C.a,alt:"register"})))}var x=t(146),R=t.n(x),I=t(147),P=t.n(I);function L(e){var a=e.match,t=Object(n.useState)({username:"",token:""}),o=Object(i.a)(t,2),c=o[0],m=o[1];Object(n.useEffect)((function(){var e=a.params.token,t=P.a.decode(e).username;e&&m(Object(h.a)(Object(h.a)({},c),{},{username:t,token:e}))}),[a.params]);var u=c.username,p=c.token;return r.a.createElement("div",{className:"background"},g()?r.a.createElement(l.a,{to:"/"}):null,r.a.createElement(d.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Activate your account, ",u),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),f.a.post("/users/activation",{token:p}).then((function(e){m(Object(h.a)({},c)),d.b.success(e.data.message)})).catch((function(e){return d.b.error(e.response.data.error)}))}},r.a.createElement("input",{type:"submit",value:"Activate"})),r.a.createElement("span",{className:"separator"},r.a.createElement("p",{style:{margin:"4rem 0"}},"or")),r.a.createElement(s.b,{to:"/register",className:"login-btn",style:{fontWeight:"bold"}},"Register"),r.a.createElement(s.b,{to:"/login",className:"login-btn",style:{fontWeight:"bold"}},"Login")),r.a.createElement("img",{src:R.a,alt:"register"})))}var A=t(148),D=t.n(A);function W(){var e,a=Object(n.useState)({email:""}),t=Object(i.a)(a,2),o=t[0],c=t[1],s=o.email;return r.a.createElement("div",{className:"background"},r.a.createElement(d.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Forgotten password"),r.a.createElement("p",{style:{textAlign:"center",marginBottom:"2rem"}},"Insert your email to receive link to reset your password. If no error occur, check your email"),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),s?f.a.post("/users/forgotpassword",{email:s}).catch((function(e){return d.b.error(e.response.data.error)})):d.b.error("Enter your email address")}},r.a.createElement("input",{type:"email",value:s,onChange:(e="email",function(a){return c(Object(h.a)(Object(h.a)({},o),{},Object(E.a)({},e,a.target.value)))}),placeholder:"Email",autoComplete:"nope"}),r.a.createElement("input",{type:"submit",value:"Submit"}))),r.a.createElement("img",{src:D.a,alt:"forgotpassword"})))}var _=t(149),F=t.n(_);function J(e){var a=e.match,t=Object(n.useState)({password:"",confirmPassword:"",token:""}),o=Object(i.a)(t,2),c=o[0],l=o[1],m=c.password,u=c.passwordConfirm,g=c.token;Object(n.useEffect)((function(){var e=a.params.token;e&&l(Object(h.a)(Object(h.a)({},c),{},{token:e}))}),[]);var p=function(e){return function(a){return l(Object(h.a)(Object(h.a)({},c),{},Object(E.a)({},e,a.target.value)))}};return r.a.createElement("div",{className:"background"},r.a.createElement(d.a,null),r.a.createElement("div",{className:"background-flex"},r.a.createElement("div",{className:"flex-register"},r.a.createElement("h2",null,"Reset password"),r.a.createElement("form",{className:"flex-form",onSubmit:function(e){e.preventDefault(),m===u&&u&&m?f.a.put("/users/resetpassword",{newPassword:m,resetPasswordLink:g}).then((function(e){l(Object(h.a)(Object(h.a)({},c),{},{password:"",passwordConfirm:""})),d.b.success(e.data.message)})).catch((function(e){d.b.error(e.response.data.error)})):d.b.error("Passwords don't match")}},r.a.createElement("input",{type:"password",value:m,onChange:p("password"),placeholder:"Password"}),r.a.createElement("input",{type:"password",value:u,onChange:p("passwordConfirm"),placeholder:"Confirm password"}),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("span",{className:"separator"},r.a.createElement("p",{style:{margin:"2.5rem 0"}},"or")),r.a.createElement(s.b,{to:"/login",className:"login-btn",style:{fontWeight:"bold"}},r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.5rem"}}),"Login")),r.a.createElement("img",{src:F.a,alt:"forgotpassword"})))}function G(e){var a=e.match,t=e.history,o=Object(n.useState)({username:"",email:""}),c=Object(i.a)(o,2),l=c[0],m=c[1],p=(new AbortController).signal;Object(n.useEffect)((function(){var e=localStorage.user;localStorage.length&&f.a.get("/users/".concat(e.replace(/['"]+/g,"")),{signal:p}).then((function(e){m({_id:e.data._id,username:e.data.username,email:e.data.email}),d.b.success("Welcome!")})).catch((function(e){return d.b.error(e.response.data.error)}))}),[a.params]);var b=l.username,E=l.email;return r.a.createElement("div",{className:"background"},r.a.createElement(d.a,null),r.a.createElement("div",{className:"background-white"},g()?r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"Welcome, ",r.a.createElement("span",{style:{color:"crimson"}},b)),r.a.createElement("h2",null,"You signed in with ",r.a.createElement("span",{style:{color:"crimson"}},E)," email"),r.a.createElement("button",{onClick:function(){var e;e=function(){d.b.success("Signout successful"),t.push("/")},u.a.remove("token",{expires:1}),localStorage.removeItem("user"),e()}},r.a.createElement("i",{className:"fa fa-sign-out",style:{marginRight:"0.4rem"}}),"Signout")):r.a.createElement("div",{className:"background-login"},r.a.createElement("h2",null,"Access denied to unauthorized users"),r.a.createElement(s.b,{to:"/login"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-user",style:{marginRight:"0.4rem"}}),"Login")))))}function q(){return r.a.createElement(s.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:b}),r.a.createElement(l.b,{path:"/register",component:S}),r.a.createElement(l.b,{path:"/login",component:j}),r.a.createElement(l.b,{path:"/users/activate/:token",component:L}),r.a.createElement(l.b,{path:"/forgotpassword",component:W}),r.a.createElement(l.b,{path:"/resetpassword/:token",component:J}),r.a.createElement(l.b,{path:"/user/:userId",component:G})))}t(287),t(288);c.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.3cb3231f.chunk.js.map